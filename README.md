# Linux Scheduling

‚ÑπÔ∏è ***–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –î–∞–Ω–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ª–∏—à—å –≤–≤–æ–¥–Ω—ã–π –æ–±–∑–æ—Ä –æ–±—à–∏—Ä–Ω–æ–π —Ç–µ–º—ã, —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ Linux. –í –Ω–µ–π –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä—è–¥–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π. –î–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –≤–æ–ø—Ä–æ—Å–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –∏ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–æ–π, —Ç–∞–∫ –∫–∞–∫ —Ç–µ–º–∞ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞.*

## –í–µ–¥–µ–Ω–∏–µ

### –ó–∞–∫–æ–Ω –ú—É—Ä–∞ (–º–æ—Ä–∞–ª—å–Ω–æ–µ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ)

![Image alt](./img/Moores_law.png)  

–í—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, —É–∂–µ –≤–∏–¥–µ–ª–∏ —ç—Ç–æ—Ç –≥—Ä–∞—Ñ–∏–∫, –∏–ª–ª—é—Å—Ç—Ä–∏—Ä—É—é—â–∏–π –∑–∞–∫–æ–Ω –ú—É—Ä–∞. –≠—Ç–æ—Ç –∑–∞–∫–æ–Ω –≥–ª–∞—Å–∏—Ç, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ –Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–π —Å—Ö–µ–º–µ —É–¥–≤–∞–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –∫–∞–∂–¥—ã–µ –¥–≤–∞ –≥–æ–¥–∞, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–º—É —É–≤–µ–ª–∏—á–µ–Ω–∏—é –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏. –û–¥–Ω–∞–∫–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≥–æ–¥—ã –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ä–æ—Å—Ç —á–∏—Å–ª–∞ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤, —Å–∫–æ—Ä–æ—Å—Ç—å –∏—Ö —Ä–∞–±–æ—Ç—ã –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è —Å —Ç–æ–π –∂–µ –¥–∏–Ω–∞–º–∏–∫–æ–π.

üìö*–î–ª—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω–æ–π —Ç–µ–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å [—ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ–π –Ω–∞ –•–∞–±—Ä–µ](https://habr.com/ru/companies/droider/articles/568806/)*

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä

![Image alt](./img/caby-lake.jpg)

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã –æ–±–ª–∞–¥–∞—é—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —è–¥–µ—Ä, —á—Ç–æ —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á. –û–¥–Ω–∞–∫–æ —Ä–µ—á—å –∏–¥–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –æ–± —ç—Ç–æ–º. –ó–∞–º–µ—Ç–∏–º, —á—Ç–æ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π –≤—Å–µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ, –∞ –Ω–∞ –Ω–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. 

–°—Ç–æ–∏—Ç —Ç–∞–∫–∂–µ –≤–∑–≥–ª—è–Ω—É—Ç—å –Ω–∞:

![Image alt](./img/arm1_1985.webp)

ARM1, –≤—ã–ø—É—â–µ–Ω–Ω—ã–π –≤ 1985 –≥–æ–¥—É, –≤–æ–≤—Å–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª –º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω–æ—Å—Ç—å. –¢–∞–∫ –∫–∞–∫–∏–º –∂–µ –æ–±—Ä–∞–∑–æ–º –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ? 

–í —ç—Ç–æ–º –ø–æ–º–æ–≥–∞–µ—Ç **–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (Scheduler)**, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏. –û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤, –ø–æ–∑–≤–æ–ª—è—è —Å–∏—Å—Ç–µ–º–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –¥–∞–∂–µ –Ω–∞ –æ–¥–Ω–æ—è–¥–µ—Ä–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞—Ö.

## –ß—Ç–æ –∂–µ —Ç–∞–∫–æ–µ –ø—Ä–æ—Ü–µ—Å—Å?

–ü—Ä–æ—Ü–µ—Å—Å –≤ Linux ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è —Å–æ–±–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –ö–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –æ–±–ª–∞—Å—Ç—å –ø–∞–º—è—Ç–∏, —Ä–µ—Å—É—Ä—Å—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å—é –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ä–µ—Å—É—Ä—Å—ã.

üìö*–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö –≤ Linux –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å [–∑–¥–µ—Å—å](https://habr.com/ru/articles/423049/)*
üì∫*–û —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–µ—Ç–∞–ª—è—Ö (–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, PCB, –∞–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ) –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [–∑–¥–µ—Å—å](https://www.youtube.com/watch?v=LDhoD4IVElk&t=5s)*

### PCB (Process Control Block)

–ö–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≤ Linux –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–∑—ã–≤–∞–µ–º–æ–π PCB (Process Control Block), –∫–æ—Ç–æ—Ä–∞—è –≤ Linux —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `task_struct`. –≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ—Ü–µ—Å—Å–µ, –≤–∫–ª—é—á–∞—è:

- **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ (PID)**: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä, –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º—ã–π –∫–∞–∂–¥–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É.
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞**: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ª–∏ –ø—Ä–æ—Ü–µ—Å—Å, –æ–∂–∏–¥–∞–µ—Ç –ª–∏ –æ–Ω —Ä–µ—Å—É—Ä—Å–æ–≤ –∏–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω.
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –∑–Ω–∞—á–µ–Ω–∏–µ, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–µ–µ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –≤–∞–∂–µ–Ω –ø—Ä–æ—Ü–µ—Å—Å –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –¥—Ä—É–≥–∏–º–∏.
- **–£–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∏ –¥–æ—á–µ—Ä–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã**: –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
- **–†–µ—Å—É—Ä—Å—ã**: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏, –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ñ–∞–π–ª–∞—Ö –∏ –¥—Ä—É–≥–∏—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–∞—Ö.


üìö*–° –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `task_struct` –≤—ã –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è [–∑–¥–µ—Å—å](https://github.com/torvalds/linux/blob/master/include/linux/sched.h)*

```c
struct task_struct {
#ifdef CONFIG_THREAD_INFO_IN_TASK
	/*
	 * For reasons of header soup (see current_thread_info()), this
	 * must be the first element of task_struct.
	 */
	struct thread_info		thread_info;
#endif
	unsigned int			__state;

	/* saved state for "spinlock sleepers" */
	unsigned int			saved_state;

	/*
	 * This begins the randomizable portion of task_struct. Only
	 * scheduling-critical items should be added above here.
	 */
	randomized_struct_fields_start

	void				*stack;
	refcount_t			usage;
	/* Per task flags (PF_*), defined further below: */
	unsigned int			flags;
	unsigned int			ptrace;
    ...
```

## –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (Scheduler)

### –¶–µ–ª–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (Scheduler) –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö –∑–∞–¥–∞—á:

1. **–ú–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞**  
2. **–°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤**  
3. **–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞**  
4. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏**  

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

### –ö–∞–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤—ã–±–∏—Ä–∞–µ—Ç —Å–ª–µ–¥—É—é—â—É—é –∑–∞–¥–∞—á—É?

–í Linux, –∫–∞–∫ –∏ –≤ –ª—é–±–æ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –û–°, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á. –≠—Ç–æ –±–∞–∑–æ–≤–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, –ø–æ–≤–µ—Ä—Ö –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

### RTPRIO, NI –∏ PRI:

#### –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
–î–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—ã–≤–æ–¥ —É—Ç–∏–ª–∏—Ç—ã `ps`:
```
‚ûú  priorities ps -eo pid,rtprio,ni,pri,policy,cmd

    PID RTPRIO  NI PRI POL CMD
      1      -   0  19 TS  /sbin/init splash
      2      -   0  19 TS  [kthreadd]
      3      -   0  19 TS  [pool_workqueue_release]
      4      - -20  39 TS  [kworker/R-rcu_gp]
      5      - -20  39 TS  [kworker/R-sync_wq]
      6      - -20  39 TS  [kworker/R-slub_flushwq]
      7      - -20  39 TS  [kworker/R-netns]
     10      - -20  39 TS  [kworker/0:0H-events_highpri]
     12      - -20  39 TS  [kworker/R-mm_percpu_wq]
     13      -   0  19 TS  [rcu_tasks_kthread]
     14      -   0  19 TS  [rcu_tasks_rude_kthread]
     15      -   0  19 TS  [rcu_tasks_trace_kthread]
     16      -   0  19 TS  [ksoftirqd/0]
     17      -   0  19 TS  [rcu_preempt]
     18      -   0  19 TS  [rcu_exp_par_gp_kthread_worker/0]
     19      -   0  19 TS  [rcu_exp_gp_kthread_worker]
     20     99   - 139 FF  [migration/0]
     21     50   -  90 FF  [idle_inject/0]
     22      -   0  19 TS  [cpuhp/0]
     23      -   0  19 TS  [cpuhp/1]
     24     50   -  90 FF  [idle_inject/1]
     25     99   - 139 FF  [migration/1]
     ... [output omitted] ...
```
–ö–∞–∂–¥—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ –∏–∑ –¥–≤—É—Ö –∑–Ω–∞—á–µ–Ω–∏–π: RTPRIO –∏–ª–∏ NI, –ø—Ä–∏ —ç—Ç–æ–º –∫–∞–∂–¥—ã–π –æ–±–ª–∞–¥–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ–º PRI. –†–∞–∑–±–µ—Ä–µ–º, –ø–æ—á–µ–º—É —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç–∞–∫ –º–Ω–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏ –∑–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö.


#### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –ø–æ–ª–µ–π (—Å–æ–≥–ª–∞—Å–Ω–æ `man ps`)
```
 rtprio      RTPRIO    realtime priority.
 ni          NI        nice value. This ranges from 19 (nicest) to -20 (not nice to others), see nice(1).  (alias nice).
 pri         PRI       priority of the process.  Higher number means higher priority.
```


#### 1. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (RTPRIO):

–ü–∞—Ä–∞–º–µ—Ç—Ä `rtprio` (realtime priority) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (RT) –≤ Linux. –û—Å–Ω–æ–≤–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:

- **–û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**  
   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –¥–ª—è –ø–æ–ª–∏—Ç–∏–∫:
   - `SCHED_FIFO` (FIFO-–æ—á–µ—Ä–µ–¥—å)
   - `SCHED_RR` (–¶–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
   - `SCHED_DEADLINE` (–ü–æ –≤—Ä–µ–º–µ–Ω–Ω—ã–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º)

- **–î–∏–∞–ø–∞–∑–æ–Ω –∑–Ω–∞—á–µ–Ω–∏–π**  
   –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: –æ—Ç 1 –¥–æ 99, –≥–¥–µ:
   - 1 - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
   - 99 - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

- **–î–∏–Ω–∞–º–∏—á–Ω–æ—Å—Ç—å**  
   –ú–æ–∂–µ—Ç –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å—Å—è:
   - –Ø–¥—Ä–æ–º –û–°
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑:
     ```bash
     sudo chrt -f -p <priority> <pid>    ### SCHED_FIFO
     sudo chrt -r -p <priority> <pid>    ### SCHED_RR
     ```
     üí°–≠–∫—Å–ø–µ—Ä–µ–º–µ–Ω—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é `chrt` –º–æ–∂–Ω–æ –∏–∑—É—á–∏—Ç—å [***–∑–¥–µ—Å—å***](./priorities/chrt_experements.md) 

- **–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**  
   –†–µ–∞–ª–∏–∑—É–µ—Ç —Å—Ç—Ä–æ–≥–æ–µ —É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ:
   ```math
   ‚àÄ(P‚ÇÅ,P‚ÇÇ) ‚àà –ü—Ä–æ—Ü–µ—Å—Å—ã, rtprio(P‚ÇÅ) > rtprio(P‚ÇÇ) ‚áí P‚ÇÅ ‚âª P‚ÇÇ
   ```
   –≥–¥–µ ‚âª –æ–∑–Ω–∞—á–∞–µ—Ç –±–µ–∑—É—Å–ª–æ–≤–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏



#### 2. –ó–Ω–∞—á–µ–Ω–∏–µ Nice (NI):

–ü–∞—Ä–∞–º–µ—Ç—Ä `nice` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (non-RT) –≤ Linux. –ü–æ —Å—É—Ç–∏ —è–≤–ª—è–µ—Ç—Å—è UAPI. –û—Å–Ω–æ–≤–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:

- **–û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**
   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª–∏—Ç–∏–∫:
   - `SCHED_OTHER` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
   - `SCHED_BATCH` (–ø–∞–∫–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏)
   - `SCHED_IDLE` (—Ñ–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã)

- **–î–∏–∞–ø–∞–∑–æ–Ω –∑–Ω–∞—á–µ–Ω–∏–π**
   –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: –æ—Ç -20 –¥–æ 19, –≥–¥–µ:
   - -20 - –Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
   - 19 - –Ω–∞–∏–Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

- **–°—Ç–∞—Ç–∏—á–Ω–æ—Å—Ç—å**
   - –ù–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —è–¥—Ä–æ–º –û–° –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑:
     ```bash
     nice -n <value> <command>
     renice -n <value> -p <pid>
     ```
     üí°–≠–∫—Å–ø–µ—Ä–µ–º–µ–Ω—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é `nice` –º–æ–∂–Ω–æ –∏–∑—É—á–∏—Ç—å [***–∑–¥–µ—Å—å***](./priorities/nice_experements.md) 

- **–í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**
   –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤–µ—Å –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–µ CFS:
   ```math
   weight = 1024 √ó (1.25)^(-nice)
   ```
   –ß–µ–º –≤—ã—à–µ nice ‚Üí –º–µ–Ω—å—à–µ –≤–µ—Å ‚Üí –º–µ–Ω—å—à–µ –¥–æ–ª—è CPU


#### 3. –ü–æ–ª–µ PRI:

–ü–∞—Ä–∞–º–µ—Ç—Ä `PRI` (–æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) - —ç—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç, —Å–æ—Ö—Ä–∞–Ω—è–µ–º—ã–π –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (—Ä–∞–Ω—å—à–µ –≤ —Å–∏—Å—Ç–µ–º–∞—Ö –¥–æ Linux 2.6 –æ—Ç–æ–±—Ä–∂–∞–ª –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç). –í –¥–∞–ª—å–Ω–µ–π—à–µ–º –æ–Ω –±—Ä–∞—Ç—å—Å—è –≤–æ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–µ –±—É–¥–µ—Ç. –û—Å–Ω–æ–≤–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞:

- **–û–±–ª–∞—Å—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è**  
   –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —É—Ç–∏–ª–∏—Ç–∞—Ö (`top`, `ps`), –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º

- **–ü–æ—á–µ–º—É –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω**  
   - –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ  
   - –†–∞–∑–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç –µ–≥–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É (–≤–ø–ª–æ—Ç—å –¥–æ —Ä–∞–∑–Ω—ã—Ö –≤—ã–≤–æ–¥–æ–≤ —É `ps -l` –∏ `ps -o pri`)

- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ —è–¥—Ä–µ [*kernel/sched/core.c*](https://github.com/torvalds/linux/blob/master/kernel/sched/core.c)**
```c
static inline int __task_prio(const struct task_struct *p)
{
	if (p->sched_class == &stop_sched_class) /* trumps deadline */
		return -2;

	if (p->dl_server)
		return -1; /* deadline */

	if (rt_or_dl_prio(p->prio))
		return p->prio; /* [-1, 99] */

	if (p->sched_class == &idle_sched_class)
		return MAX_RT_PRIO + NICE_WIDTH; /* 140 */

	if (task_on_scx(p))
		return MAX_RT_PRIO + MAX_NICE + 1; /* 120, squash ext */

	return MAX_RT_PRIO + MAX_NICE; /* 119, squash fair */
}
```

#### –ò—Ç–æ–≥:

–°–≤–µ–¥—ë–º –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏–∏ –≤ —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æc—Ç–∏:

|                          | Dynamic Priority                  | Static Priority                    |
|--------------------------|:---------------------------------:|:----------------------------------:|
| **Policy Type**          | real-time                         | non-real-time                      |
| **Scheduling Classes**   | SCHED_FIFO SCHED_RR               | SCHED_OTHER                        |
| **Priority Range**       | RTPRIO=[1, 99]                    | NI=[-20;19]                        |
| **Priority Meaning**     | High RTPRIO means high priority   | High NI means low priority         |


–î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —É—Ç–∏–ª–∏—Ç–æ–π `ps` —Å –∫–æ–º–∞–Ω–¥–æ–π:
```bash
ps -eo pid,rtprio,ni,pri,policy,cmd
```
–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—É—é –≤ —Ñ–∞–π–ª–µ [*`sched_pid_info.c`*](./priorities/sched_pid_info.c)




## –ü–æ–ª–∏—Ç–∏–∫–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

### –°–æ–≤–º–µ—Å—Ç–Ω–æ–µ (cooperative) –∏ –ø—Ä–µ—Ä—ã–≤–∞—é—â–µ–µ (preemptive) –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º 2 –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ—Ç–æ–¥–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.

#### –°–æ–≤–º–µ—Å—Ç–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (cooperative)

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Å–µ–±–µ –ø—Ä–æ—Å—Ç–æ–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É FIFO (First In, First Out). 

–ü—Ä–∏ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ–±—ã –≤—ã–¥–µ–ª–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—É (CPU) —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏ –æ–∂–∏–¥–∞—Ç—å –µ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É, –æ–Ω –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–µ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É –≤ –æ—á–µ—Ä–µ–¥–∏ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ CPU.
```
                 1                                      2                                      3
       Waiting        Done                    Waiting        Done                    Waiting        Done
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îå‚îÄ‚îÇ   *   ‚îÇ     |       |                ‚îÇ  P_2  ‚îÇ     |       |              ‚îå‚îÄ‚îÇ   *   ‚îÇ     |  P_1  |<‚îÄ‚îê
    ‚îÇ ‚îÇ  P_2  ‚îÇ     ‚îÇ       |                ‚îÇ  P_3  ‚îÇ     ‚îÇ       |              | ‚îÇ  P_3  ‚îÇ     ‚îÇ       |  |
    ‚îÇ ‚îÇ  P_3  ‚îÇ     ‚îÇ       ‚îÇ                ‚îÇ  P_4  ‚îÇ     ‚îÇ       ‚îÇ              | ‚îÇ  P_4  ‚îÇ     ‚îÇ       ‚îÇ  |
    ‚îÇ ‚îÇ  P_4  ‚îÇ     ‚îÇ       ‚îÇ                ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ              | ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ  |
    ‚îÇ ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ                ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ              | ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ  |
P_1 ‚îÇ ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ                ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ          P_2 | ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ  | P_1
    ‚îÇ ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ                ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ              | ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ  |
    ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              | ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  |
    ‚îÇ                                                                             |                          |
    ‚îÇ           CPU                                    CPU                        |           CPU            ‚îÇ
    ‚îÇ        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                     |        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>|       |                              |  P_1  |‚è≥                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>|   *   |‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –∏–º–µ–µ—Ç —Å–≤–æ–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏. –° –æ–¥–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –æ–Ω –ø—Ä–æ—Å—Ç –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π. –° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∑–∞–≤–∏—Å–∞–µ—Ç –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ, —ç—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, —á—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.
```
Will be stuck in this state:
                 2
       Waiting        Done
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ  P_2  ‚îÇ     |       |
      ‚îÇ  P_3  ‚îÇ     ‚îÇ       |
      ‚îÇ  P_4  ‚îÇ     ‚îÇ       ‚îÇ
      ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ
      ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ
      ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ
      ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

                CPU
             ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
             |  P_1  |‚ôæÔ∏è
             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```
–†–∞–Ω–µ–µ –±—ã–ª –ø—Ä–æ–≤–µ–¥–µ–Ω —ç–∫—Å–ø–µ—Ä–µ–º–µ–Ω—Ç, –≤—ã–∑—ã–≤–∞—é—â–∏–π —Ç–∞–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Å–º. [*chrt_experement.md "–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç 4"*](./priorities/chrt_experements.md))

#### –ü—Ä–µ—Ä—ã–≤–∞—é—â–µ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (preemptive)

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ, –ø—Ä–µ—Ä—ã–≤–∞—é—â–µ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫—É –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–∞–º.
```
                 1                                      2                                      3
       Waiting        Done                    Waiting        Done                    Waiting        Done
      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îå‚îÄ‚îÇ   *   ‚îÇ     |       |                ‚îÇ  P_2  ‚îÇ     |       |              ‚îå‚îÄ‚îÇ   *   ‚îÇ     |       |
    ‚îÇ ‚îÇ  P_2  ‚îÇ     ‚îÇ       |                ‚îÇ  P_3  ‚îÇ     ‚îÇ       |              | ‚îÇ  P_3  ‚îÇ     ‚îÇ       |
    ‚îÇ ‚îÇ  P_3  ‚îÇ     ‚îÇ       ‚îÇ                ‚îÇ  P_4  ‚îÇ     ‚îÇ       ‚îÇ              | ‚îÇ  P_4  ‚îÇ     ‚îÇ       ‚îÇ
    ‚îÇ ‚îÇ  P_4  ‚îÇ     ‚îÇ       ‚îÇ                ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ              | ‚îÇ   *   ‚îÇ<‚îÄ‚îê  ‚îÇ       ‚îÇ
    ‚îÇ ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ                ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ              | ‚îÇ  ...  ‚îÇ  ‚îÇ  ‚îÇ       ‚îÇ
P_1 ‚îÇ ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ                ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ          P_2 | ‚îÇ  ...  ‚îÇ  ‚îÇ  ‚îÇ       ‚îÇ
    ‚îÇ ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ                ‚îÇ  ...  ‚îÇ     ‚îÇ       ‚îÇ              | ‚îÇ  ...  ‚îÇ  ‚îÇ  ‚îÇ       ‚îÇ
    ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              | ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ                                                                             |            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ           CPU                                    CPU                        |           CPU            | P_1
    ‚îÇ        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                     |        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>|       |                              |  P_1  |‚è≥(limited)          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>|   *   |‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

üìö*–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É –ø—Ä–µ—Ä—ã–≤–∞—é—â–∏–º –∏ —Å–æ–≤–º–µ—Å—Ç–Ω—ã–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å [*–∑–¥–µ—Å—å*](https://www.geeksforgeeks.org/difference-between-preemptive-and-cooperative-multitasking/)*  
üì∫*–ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ —Ä–∞–±–æ—Ç—É –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞, –ø–∏–∫–∏ CPU, –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞ –∏ –ø—Ä–æ—á—É—é –ø–æ–ª–µ–∑–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [*–∑–¥–µ—Å—å*](https://www.youtube.com/watch?v=O2tV9q6784k&t=52s)*

### –¢–∏–ø—ã –ø–æ–ª–∏—Ç–∏–∫

–ù–∞ [*Linux Foundation*](https://wiki.linuxfoundation.org/realtime/documentation/technical_basics/sched_policy_prio/start) —É–∫–∞–∑–∞–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ:

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞ –ø–æ–ª–∏—Ç–∏–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:

- **–û–±—ã—á–Ω—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ (Non real-time policies):**
  - `SCHED_OTHER`
  - `SCHED_BATCH`
  - `SCHED_IDLE`

- **–ü–æ–ª–∏—Ç–∏–∫–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (Real-time policies):**
  - `SCHED_FIFO`
  - `SCHED_RR`
  - `SCHED_DEADLINE`

üí°–≠–∫—Å–ø–µ—Ä–µ–º–µ–Ω—Ç—ã —Å –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏–∑—É—á–∏—Ç—å [***–∑–¥–µ—Å—å***](./policies/policy_experiments.md) 
